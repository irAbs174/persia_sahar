+function(h){"use strict";function a(a){return this.each(function(){var b=h(this),c=h.extend({},i.DEFAULTS,b.data(),"object"==typeof a&&a),d=b.data("bs.validator");(d||"destroy"!=a)&&(d||b.data("bs.validator",d=new i(this,c)),"string"==typeof a&&d[a]())})}var i=function(a,b){for(var c in this.$element=h(a),this.options=b,b.errors=h.extend({},i.DEFAULTS.errors,b.errors),b.custom)if(!b.errors[c])throw new Error("Missing default error message for custom validator: "+c);h.extend(i.VALIDATORS,b.custom),this.$element.attr("novalidate",!0),this.toggleSubmit(),this.$element.on("input.bs.validator change.bs.validator focusout.bs.validator",h.proxy(this.validateInput,this)),this.$element.on("submit.bs.validator",h.proxy(this.onSubmit,this)),this.$element.find("[data-match]").each(function(){var a=h(this),b=a.data("match");h(b).on("input.bs.validator",function(){a.val()&&a.trigger("input.bs.validator")})})};i.DEFAULTS={delay:500,html:!1,disable:!0,custom:{},errors:{match:"Does not match",minlength:"Not long enough"},feedback:{success:"glyphicon-ok",error:"glyphicon-warning-sign"}},i.VALIDATORS={native:function(c){var a=c[0];return!a.checkValidity||a.checkValidity()},match:function(a){var b=a.data("match");return!a.val()||a.val()===h(b).val()},minlength:function(c){var a=c.data("minlength");return!c.val()||c.val().length>=a}},i.prototype.validateInput=function(a){var g=h(a.target),i=g.data("bs.validator.errors");if(g.is("[type=\"radio\"]")&&(g=this.$element.find("input[name=\""+g.attr("name")+"\"]")),this.$element.trigger(a=h.Event("validate.bs.validator",{relatedTarget:g[0]})),!a.isDefaultPrevented()){var d=this;this.runValidators(g).done(function(b){g.data("bs.validator.errors",b),b.length?d.showErrors(g):d.clearErrors(g),i&&b.toString()===i.toString()||(a=b.length?h.Event("invalid.bs.validator",{relatedTarget:g[0],detail:b}):h.Event("valid.bs.validator",{relatedTarget:g[0],detail:i}),d.$element.trigger(a)),d.toggleSubmit(),d.$element.trigger(h.Event("validated.bs.validator",{relatedTarget:g[0]}))})}},i.prototype.runValidators=function(j){function k(c){return j.data(c+"-error")||j.data("error")||"native"==c&&j[0].validationMessage||b.errors[c]}var c=[],a=h.Deferred(),b=this.options;return j.data("bs.validator.deferred")&&j.data("bs.validator.deferred").reject(),j.data("bs.validator.deferred",a),h.each(i.VALIDATORS,h.proxy(function(b,a){if((j.data(b)||"native"==b)&&!a.call(this,j)){var d=k(b);~c.indexOf(d)||c.push(d)}},this)),!c.length&&j.val()&&j.data("remote")?this.defer(j,function(){var b={};b[j.attr("name")]=j.val(),h.get(j.data("remote"),b).fail(function(e,a,b){c.push(k("remote")||b)}).always(function(){a.resolve(c)})}):a.resolve(c),a.promise()},i.prototype.validate=function(){var b=this.options.delay;return this.options.delay=0,this.$element.find(":input:not([type=\"submit\"], button):enabled:visible").trigger("input.bs.validator"),this.options.delay=b,this},i.prototype.showErrors=function(a){var d=this.options.html?"html":"text";this.defer(a,function(){var b=a.closest(".form-group"),c=b.find(".help-block.with-errors"),e=b.find(".form-control-feedback"),f=a.data("bs.validator.errors");f.length&&(f=h("<ul/>").addClass("list-unstyled").append(h.map(f,function(a){return h("<li/>")[d](a)})),void 0===c.data("bs.validator.originalContent")&&c.data("bs.validator.originalContent",c.html()),c.empty().append(f),b.addClass("has-error"),b.children("input,textarea,select").addClass("is-invalid"),e.length&&e.removeClass(this.options.feedback.success)&&e.addClass(this.options.feedback.error)&&b.removeClass("has-success"))})},i.prototype.clearErrors=function(e){var a=e.closest(".form-group"),b=a.find(".help-block.with-errors"),c=a.find(".form-control-feedback");b.html(b.data("bs.validator.originalContent")),a.removeClass("has-error"),a.children("input,textarea,select").removeClass("is-invalid"),a.children("input,textarea,select").addClass("is-valid"),c.length&&c.removeClass(this.options.feedback.error)&&c.addClass(this.options.feedback.success)&&a.addClass("has-success")},i.prototype.hasErrors=function(){return!!this.$element.find(":input:not([type=\"submit\"], button):enabled:visible").filter(function(){return!!(h(this).data("bs.validator.errors")||[]).length}).length},i.prototype.isIncomplete=function(){return!!this.$element.find(":input:not([type=\"submit\"], button):enabled:visible").filter("[required]").filter(function(){return"checkbox"===this.type?!this.checked:"radio"===this.type?!h("[name=\""+this.name+"\"]:checked").length:""===h.trim(this.value)}).length},i.prototype.onSubmit=function(b){this.validate(),(this.isIncomplete()||this.hasErrors())&&b.preventDefault()},i.prototype.toggleSubmit=function(){if(this.options.disable){var a=h("button[type=\"submit\"], input[type=\"submit\"]").filter("[form=\""+this.$element.attr("id")+"\"]").add(this.$element.find("input[type=\"submit\"], button[type=\"submit\"]"));a.toggleClass("disabled",this.isIncomplete()||this.hasErrors()).css({"pointer-events":"all",cursor:"pointer"})}},i.prototype.defer=function(a,b){return b=h.proxy(b,this),this.options.delay?(window.clearTimeout(a.data("bs.validator.timeout")),void a.data("bs.validator.timeout",window.setTimeout(b,this.options.delay))):b()},i.prototype.destroy=function(){return this.$element.removeAttr("novalidate").removeData("bs.validator").off(".bs.validator"),this.$element.find(":input:not([type=\"submit\"], button):enabled:visible").off(".bs.validator").removeData(["bs.validator.errors","bs.validator.deferred"]).each(function(){var a=h(this),b=a.data("bs.validator.timeout");window.clearTimeout(b)&&a.removeData("bs.validator.timeout")}),this.$element.find(".help-block.with-errors").each(function(){var a=h(this),b=a.data("bs.validator.originalContent");a.removeData("bs.validator.originalContent").html(b)}),this.$element.find("input[type=\"submit\"], button[type=\"submit\"]").removeClass("disabled"),this.$element.find(".has-error").removeClass("has-error"),this};var b=h.fn.validator;h.fn.validator=a,h.fn.validator.Constructor=i,h.fn.validator.noConflict=function(){return h.fn.validator=b,this},h(window).on("load",function(){h("form[data-toggle=\"validator\"]").each(function(){var b=h(this);a.call(b,b.data())})})}(jQuery);